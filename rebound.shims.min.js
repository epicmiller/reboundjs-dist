"document"in self&&!("classList"in document.createElement("_"))&&!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],r=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},c=function(t){for(var e=s.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},l=c[n]=[],h=function(){return new c(this)};if(o[n]=Error[n],l.item=function(t){return this[t]||null},l.contains=function(t){return t+="",-1!==u(this,t)},l.add=function(){var t,e=arguments,n=0,i=e.length,r=!1;do t=e[n]+"",-1===u(this,t)&&(this.push(t),r=!0);while(++n<i);r&&this._updateClassName()},l.remove=function(){var t,e=arguments,n=0,i=e.length,r=!1;do{t=e[n]+"";var s=u(this,t);-1!==s&&(this.splice(s,1),r=!0)}while(++n<i);r&&this._updateClassName()},l.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),!n},l.toString=function(){return this.join(" ")},r.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,r.defineProperty(i,e,d))}}else r[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),this.Element&&function(t){t.matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,n=(e.parentNode||e.document).querySelectorAll(t),i=-1;n[++i]&&n[i]!=e;);return!!n[i]}}(Element.prototype),function(t,e,n,i){"use strict";function r(t,e){for(var n=0,i=t.length;i>n;n++)m(t[n],e)}function s(t){for(var e,n=0,i=t.length;i>n;n++)e=t[n],w(e,L[o(e)])}function a(t){return function(e){ne(e)&&(m(e,t),r(e.querySelectorAll(F),t))}}function o(t){var e=t.getAttribute("is"),n=t.nodeName.toUpperCase(),i=D.call(U,e?P+e.toUpperCase():N+n);return e&&i>-1&&!u(n,e)?-1:i}function u(t,e){return-1<F.indexOf(t+'[is="'+e+'"]')}function c(t){var e=t.currentTarget,n=t.attrChange,i=t.prevValue,r=t.newValue;pe&&e.attributeChangedCallback&&"style"!==t.attrName&&e.attributeChangedCallback(t.attrName,n===t[O]?null:i,n===t[C]?null:r)}function l(t){var e=a(t);return function(t){g.push(e,t.target)}}function h(t){fe&&(fe=!1,t.currentTarget.removeEventListener(I,h)),r((t.target||e).querySelectorAll(F),t.detail===k?k:S),ee&&p()}function d(t,e){var n=this;se.call(n,t,e),v.call(n,{target:n})}function f(t,e){Y(t,e),E?E.observe(t,ue):(de&&(t.setAttribute=d,t[_]=y(t),t.addEventListener(M,v)),t.addEventListener(q,c)),t.createdCallback&&pe&&(t.created=!0,t.createdCallback(),t.created=!1)}function p(){for(var t,e=0,n=ie.length;n>e;e++)t=ie[e],H.contains(t)||(ie.splice(e,1),m(t,k))}function m(t,e){var n,i=o(t);i>-1&&(x(t,L[i]),i=0,e!==S||t[S]?e!==k||t[k]||(t[S]=!1,t[k]=!0,i=1):(t[k]=!1,t[S]=!0,i=1,ee&&D.call(ie,t)<0&&ie.push(t)),i&&(n=t[e+"Callback"])&&n.call(t))}if(!(i in e)){var g,v,b,y,E,x,w,_="__"+i+(1e5*Math.random()>>0),S="attached",k="detached",A="extends",O="ADDITION",T="MODIFICATION",C="REMOVAL",q="DOMAttrModified",I="DOMContentLoaded",M="DOMSubtreeModified",N="<",P="=",R=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,j=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],U=[],L=[],F="",H=e.documentElement,D=U.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},$=n.prototype,B=$.hasOwnProperty,z=$.isPrototypeOf,V=n.defineProperty,J=n.getOwnPropertyDescriptor,G=n.getOwnPropertyNames,Q=n.getPrototypeOf,W=n.setPrototypeOf,Z=!!n.__proto__,X=n.create||function me(t){return t?(me.prototype=t,new me):this},Y=W||(Z?function(t,e){return t.__proto__=e,t}:G&&J?function(){function t(t,e){for(var n,i=G(e),r=0,s=i.length;s>r;r++)n=i[r],B.call(t,n)||V(t,n,J(e,n))}return function(e,n){do t(e,n);while((n=Q(n))&&!z.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),K=t.MutationObserver||t.WebKitMutationObserver,te=(t.HTMLElement||t.Element||t.Node).prototype,ee=!z.call(te,H),ne=ee?function(t){return 1===t.nodeType}:function(t){return z.call(te,t)},ie=ee&&[],re=te.cloneNode,se=te.setAttribute,ae=te.removeAttribute,oe=e.createElement,ue=K&&{attributes:!0,characterData:!0,attributeOldValue:!0},ce=K||function(){de=!1,H.removeEventListener(q,ce)},le=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},he=!1,de=!0,fe=!0,pe=!0;W||Z?(x=function(t,e){z.call(e,t)||f(t,e)},w=f):(x=function(t,e){t[_]||(t[_]=n(!0),f(t,e))},w=x),ee?(de=!1,function(){var t=J(te,"addEventListener"),e=t.value,n=function(t){var e=new CustomEvent(q,{bubbles:!0});e.attrName=t,e.prevValue=this.getAttribute(t),e.newValue=null,e[C]=e.attrChange=2,ae.call(this,t),this.dispatchEvent(e)},i=function(t,e){var n=this.hasAttribute(t),i=n&&this.getAttribute(t),r=new CustomEvent(q,{bubbles:!0});se.call(this,t,e),r.attrName=t,r.prevValue=n?i:null,r.newValue=e,n?r[T]=r.attrChange=1:r[O]=r.attrChange=0,this.dispatchEvent(r)},r=function(t){var e,n=t.currentTarget,i=n[_],r=t.propertyName;i.hasOwnProperty(r)&&(i=i[r],e=new CustomEvent(q,{bubbles:!0}),e.attrName=i.name,e.prevValue=i.value||null,e.newValue=i.value=n[r]||null,null==e.prevValue?e[O]=e.attrChange=0:e[T]=e.attrChange=1,n.dispatchEvent(e))};t.value=function(t,s,a){t===q&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[_]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=n,e.call(this,"propertychange",r)),e.call(this,t,s,a)},V(te,"addEventListener",t)}()):K||(H.addEventListener(q,ce),H.setAttribute(_,1),H.removeAttribute(_),de&&(v=function(t){var e,n,i,r=this;if(r===t.target){e=r[_],r[_]=n=y(r);for(i in n){if(!(i in e))return b(0,r,i,e[i],n[i],O);if(n[i]!==e[i])return b(1,r,i,e[i],n[i],T)}for(i in e)if(!(i in n))return b(2,r,i,e[i],n[i],C)}},b=function(t,e,n,i,r,s){var a={attrChange:t,currentTarget:e,attrName:n,prevValue:i,newValue:r};a[s]=t,c(a)},y=function(t){for(var e,n,i={},r=t.attributes,s=0,a=r.length;a>s;s++)e=r[s],n=e.name,"setAttribute"!==n&&(i[n]=e.value);return i})),e[i]=function(t,n){if(i=t.toUpperCase(),he||(he=!0,K?(E=function(t,e){function n(t,e){for(var n=0,i=t.length;i>n;e(t[n++]));}return new K(function(i){for(var r,s,a=0,o=i.length;o>a;a++)r=i[a],"childList"===r.type?(n(r.addedNodes,t),n(r.removedNodes,e)):(s=r.target,pe&&s.attributeChangedCallback&&"style"!==r.attributeName&&s.attributeChangedCallback(r.attributeName,r.oldValue,s.getAttribute(r.attributeName)))})}(a(S),a(k)),E.observe(e,{childList:!0,subtree:!0})):(g=[],le(function v(){for(;g.length;)g.shift().call(null,g.shift());le(v)}),e.addEventListener("DOMNodeInserted",l(S)),e.addEventListener("DOMNodeRemoved",l(k))),e.addEventListener(I,h),e.addEventListener("readystatechange",h),e.createElement=function(t,n){var i=oe.apply(e,arguments),r=""+t,s=D.call(U,(n?P:N)+(n||r).toUpperCase()),a=s>-1;return n&&(i.setAttribute("is",n=n.toLowerCase()),a&&(a=u(r.toUpperCase(),n))),pe=!e.createElement.innerHTMLHelper,a&&w(i,L[s]),i},te.cloneNode=function(t){var e=re.call(this,!!t),n=o(e);return n>-1&&w(e,L[n]),t&&s(e.querySelectorAll(F)),e}),-2<D.call(U,P+i)+D.call(U,N+i))throw new Error("A "+t+" type is already registered");if(!R.test(i)||-1<D.call(j,i))throw new Error("The type "+t+" is invalid");var i,c=function(){return f?e.createElement(p,i):e.createElement(p)},d=n||$,f=B.call(d,A),p=f?n[A].toUpperCase():i,m=U.push((f?P:N)+i)-1;return F=F.concat(F.length?",":"",f?p+'[is="'+t.toLowerCase()+'"]':p),c.prototype=L[m]=B.call(d,"prototype")?d.prototype:X(te),r(e.querySelectorAll(F),S),c}}}(window,document,Object,"registerElement"),function(global,undefined){"use strict";function canUseNextTick(){return"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)}function canUseMessageChannel(){return!!global.MessageChannel}function canUsePostMessage(){if(!global.postMessage||global.importScripts)return!1;var t=!0,e=global.onmessage;return global.onmessage=function(){t=!1},global.postMessage("","*"),global.onmessage=e,t}function canUseReadyStateChange(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")}function installNextTickImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return process.nextTick(function(){tasks.runIfPresent(t)}),t}}function installMessageChannelImplementation(t){var e=new global.MessageChannel;e.port1.onmessage=function(t){var e=t.data;tasks.runIfPresent(e)},t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return e.port2.postMessage(t),t}}function installPostMessageImplementation(t){function e(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function n(t){if(t.source===global&&e(t.data,i)){var n=t.data.substring(i.length);tasks.runIfPresent(n)}}var i="com.bn.NobleJS.setImmediate"+Math.random();global.addEventListener?global.addEventListener("message",n,!1):global.attachEvent("onmessage",n),t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.postMessage(i+t,"*"),t}}function installReadyStateChangeImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments),e=global.document.createElement("script");return e.onreadystatechange=function(){tasks.runIfPresent(t),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e),t}}function installSetTimeoutImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.setTimeout(function(){tasks.runIfPresent(t)},0),t}}var tasks=function(){function Task(t,e){this.handler=t,this.args=e}Task.prototype.run=function(){if("function"==typeof this.handler)this.handler.apply(undefined,this.args);else{var scriptSource=""+this.handler;eval(scriptSource)}};var nextHandle=1,tasksByHandle={},currentlyRunningATask=!1;return{addFromSetImmediateArguments:function(t){var e=t[0],n=Array.prototype.slice.call(t,1),i=new Task(e,n),r=nextHandle++;return tasksByHandle[r]=i,r},runIfPresent:function(t){if(currentlyRunningATask)global.setTimeout(function(){tasks.runIfPresent(t)},0);else{var e=tasksByHandle[t];if(e){currentlyRunningATask=!0;try{e.run()}finally{delete tasksByHandle[t],currentlyRunningATask=!1}}}},remove:function(t){delete tasksByHandle[t]}}}();if(!global.setImmediate){var attachTo="function"==typeof Object.getPrototypeOf&&"setTimeout"in Object.getPrototypeOf(global)?Object.getPrototypeOf(global):global;canUseNextTick()?installNextTickImplementation(attachTo):canUsePostMessage()?installPostMessageImplementation(attachTo):canUseMessageChannel()?installMessageChannelImplementation(attachTo):canUseReadyStateChange()?installReadyStateChangeImplementation(attachTo):installSetTimeoutImplementation(attachTo),attachTo.clearImmediate=tasks.remove}}("object"==typeof global&&global?global:this),function(t){function e(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(r,this),e(s,this))}function i(t){var e=this;return null===this._state?void this._deferreds.push(t):void c(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var i;try{i=n(e._value)}catch(r){return void t.reject(r)}t.resolve(i)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(r,this),e(s,this))}this._state=!0,this._value=t,a.call(this)}catch(i){s.call(this,i)}}function s(t){this._state=!1,this._value=t,a.call(this)}function a(){for(var t=0,e=this._deferreds.length;e>t;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function o(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function u(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(r){if(i)return;i=!0,n(r)}}var c="function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var r=this;return new n(function(n,s){i.call(r,new o(t,e,n,s))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new n(function(e,n){function i(s,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var o=a.then;if("function"==typeof o)return void o.call(a,function(t){i(s,t)},n)}t[s]=a,0===--r&&e(t)}catch(u){n(u)}}if(0===t.length)return e([]);for(var r=t.length,s=0;s<t.length;s++)i(s,t[s])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(e,n){for(var i=0,r=t.length;r>i;i++)t[i].then(e,n)})},n._setImmediateFn=function(t){c=t},"undefined"!=typeof module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var r=t.Backbone,s=[],a=s.slice;e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var r=this,s=n.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(var r=t?[t]:n.keys(this._events),s=0,a=r.length;a>s;s++){t=r[s];var o=this._events[t];if(o)if(e||i){for(var u=[],l=0,h=o.length;h>l;l++){var d=o[l];(e&&e!==d.callback&&e!==d.callback._callback||i&&i!==d.context)&&u.push(d)}u.length?this._events[t]=u:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;i||"object"!=typeof e||(i=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(e,i,this),(s||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},u=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var s=n.split(u),a=0,o=s.length;o>a;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return s[a]=e,r||"object"!=typeof i||(r=this),e[t](i,r,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(e,o);var d=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,s,a,o,u,c,l,h;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;a=i.unset,u=i.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],n.isEqual(h[r],e)||o.push(r),n.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete h[r]:h[r]=e;if(!u){o.length&&(this._pending=i);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,h[o[d]],i)}if(c)return this;if(!u)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)n.isEqual(r[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},P(this,t),this.sync("read",this,t)},save:function(t,e,i){var r,s,a,o=this.attributes;if(null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},o,r)),void 0===i.parse&&(i.parse=!0);var u=this,c=i.success;return i.success=function(t){u.attributes=o;var e=u.parse(t,i);return i.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!u.set(e,i)?!1:(c&&c(u,t,i),void u.trigger("sync",u,t,i))},P(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"!==s||i.attrs||(i.attrs=r),a=this.sync(s,this,i),r&&i.wait&&(this.attributes=o),a},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;P(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];n.each(f,function(t){n[t]&&(d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)})});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});for(var r=0,s=t.length;s>r;r++){var a=t[r]=this.get(t[r]);if(a){var o=this.modelId(a.attributes);null!=o&&delete this._byId[o],delete this._byId[a.cid];var u=this.indexOf(a);this.models.splice(u,1),this.length--,e.silent||(e.index=u,a.trigger("remove",a,this,e)),this._removeReference(a,e)}}return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:t.slice();for(var r,s,a,o,u,c=e.at,l=this.comparator&&null==c&&e.sort!==!1,h=n.isString(this.comparator)?this.comparator:null,d=[],f=[],p={},g=e.add,v=e.merge,b=e.remove,y=!l&&g&&b?[]:!1,E=0,x=t.length;x>E;E++){if(a=t[E],o=this.get(a))b&&(p[o.cid]=!0),v&&a!==o&&(a=this._isModel(a)?a.attributes:a,e.parse&&(a=o.parse(a,e)),o.set(a,e),l&&!u&&o.hasChanged(h)&&(u=!0)),t[E]=o;else if(g){if(s=t[E]=this._prepareModel(a,e),!s)continue;d.push(s),this._addReference(s,e)}s=o||s,s&&(r=this.modelId(s.attributes),!y||!s.isNew()&&p[r]||y.push(s),p[r]=!0)}if(b){for(var E=0,x=this.length;x>E;E++)p[(s=this.models[E]).cid]||f.push(s);f.length&&this.remove(f,e)}if(d.length||y&&y.length)if(l&&(u=!0),this.length+=d.length,null!=c)for(var E=0,x=d.length;x>E;E++)this.models.splice(c+E,0,d[E]);else{y&&(this.models.length=0);for(var w=y||d,E=0,x=w.length;x>E;E++)this.models.push(w[E])}if(u&&this.sort({silent:!0}),!e.silent){for(var _=null!=c?n.clone(e):e,E=0,x=d.length;x>E;E++)null!=c&&(_.index=c+E),(s=d[E]).trigger("add",s,this,_);(u||y&&y.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},P(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_isModel:function(t){return t instanceof d},_addReference:function(t){this._byId[t.cid]=t;var e=this.modelId(t.attributes);null!=e&&(this._byId[e]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}this.trigger.apply(this,arguments)}}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];n.each(v,function(t){n[t]&&(p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)})});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(t){n[t]&&(p.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)})});var y=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments)},E=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(y.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var r=e.match(E);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var s=w[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||N()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",r.emulateJSON&&(a.data._method=s);var o=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var u=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,u&&u.apply(this,arguments)};var c=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,c,r),c};var w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(_.prototype,o,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return e.history.route(t,function(n){var a=s._extractParameters(t,n);s.execute(r,a,i)!==!1&&(s.trigger.apply(s,["route:"+i].concat(a)),s.trigger("route",i,a),e.history.trigger("route",s,i,a))}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(S,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var T=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,q=/^\/+|\/+$/g,I=/#.*$/;T.started=!1,n.extend(T.prototype,o,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=decodeURI(this.location.pathname+this.getSearch()),e=this.root.slice(0,-1);return t.indexOf(e)||(t=t.slice(e.length)),t.slice(1)},getFragment:function(t){return null==t&&(t=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(C,"")},start:function(t){if(T.started)throw new Error("Backbone.history has already been started");T.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var e=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this.root=("/"+this.root+"/").replace(q,"/"),!(this._hasHashChange||!this._wantsHashChange||this._wantsPushState&&this._hasPushState)){var i=document.createElement("iframe");i.src="javascript:0",i.style.display="none",i.tabIndex=-1;var r=document.body;this.iframe=r.insertBefore(i,r.firstChild).contentWindow,this.navigate(this.fragment)}if(this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?e("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}return this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)
};this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),T.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!T.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=decodeURI(t.replace(I,"")),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe)&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new T;var M=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};d.extend=p.extend=_.extend=y.extend=T.extend=M;var N=function(){throw new Error('A "url" property or function must be specified')},P=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e});var requirejs,require,define;!function(global){function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n>-1&&(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&&e(t[n],n))break}function mixin(t,e,n,i){return e&&eachProp(e,function(e,r){(n||!hasProp(t,r))&&(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?t[r]=e:(t[r]||(t[r]={}),mixin(t[r],e,n,i)))}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,i){var r=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return r.requireType=t,r.requireModules=i,n&&(r.originalError=n),r}function newContext(t){function e(t){var e,n;for(e=0;e<t.length;e++)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(0===e||1==e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}function n(t,n,i){var r,s,a,o,u,c,l,h,d,f,p,m,g=n&&n.split("/"),v=_.map,b=v&&v["*"];if(t&&(t=t.split("/"),l=t.length-1,_.nodeIdCompat&&jsSuffixRegExp.test(t[l])&&(t[l]=t[l].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),t=m.concat(t)),e(t),t=t.join("/")),i&&v&&(g||b)){a=t.split("/");t:for(o=a.length;o>0;o-=1){if(c=a.slice(0,o).join("/"),g)for(u=g.length;u>0;u-=1)if(s=getOwn(v,g.slice(0,u).join("/")),s&&(s=getOwn(s,c))){h=s,d=o;break t}!f&&b&&getOwn(b,c)&&(f=getOwn(b,c),p=o)}!h&&f&&(h=f,d=p),h&&(a.splice(0,d,h),t=a.join("/"))}return r=getOwn(_.pkgs,t),r?r:t}function i(t){isBrowser&&each(scripts(),function(e){return e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===E.contextName?(e.parentNode.removeChild(e),!0):void 0})}function r(t){var e=getOwn(_.paths,t);return e&&isArray(e)&&e.length>1?(e.shift(),E.require.undef(t),E.makeRequire(null,{skipMap:!0})([t]),!0):void 0}function s(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function a(t,e,i,r){var a,o,u,c,l=null,h=e?e.name:null,d=t,f=!0,p="";return t||(f=!1,t="_@r"+(I+=1)),c=s(t),l=c[0],t=c[1],l&&(l=n(l,h,r),o=getOwn(T,l)),t&&(l?p=o&&o.normalize?o.normalize(t,function(t){return n(t,h,r)}):-1===t.indexOf("!")?n(t,h,r):t:(p=n(t,h,r),c=s(p),l=c[0],p=c[1],i=!0,a=E.nameToUrl(p))),u=!l||o||i?"":"_unnormalized"+(M+=1),{prefix:l,name:p,parentMap:e,unnormalized:!!u,url:a,originalName:d,isDefine:f,id:(l?l+"!"+p:p)+u}}function o(t){var e=t.id,n=getOwn(S,e);return n||(n=S[e]=new E.Module(t)),n}function u(t,e,n){var i=t.id,r=getOwn(S,i);!hasProp(T,i)||r&&!r.defineEmitComplete?(r=o(t),r.error&&"error"===e?n(r.error):r.on(e,n)):"defined"===e&&n(T[i])}function c(t,e){var n=t.requireModules,i=!1;e?e(t):(each(n,function(e){var n=getOwn(S,e);n&&(n.error=t,n.events.error&&(i=!0,n.emit("error",t)))}),i||req.onError(t))}function l(){globalDefQueue.length&&(apsp.apply(O,[O.length,0].concat(globalDefQueue)),globalDefQueue=[])}function h(t){delete S[t],delete k[t]}function d(t,e,n){var i=t.map.id;t.error?t.emit("error",t.error):(e[i]=!0,each(t.depMaps,function(i,r){var s=i.id,a=getOwn(S,s);!a||t.depMatched[r]||n[s]||(getOwn(e,s)?(t.defineDep(r,T[s]),t.check()):d(a,e,n))}),n[i]=!0)}function f(){var t,e,n=1e3*_.waitSeconds,s=n&&E.startTime+n<(new Date).getTime(),a=[],o=[],u=!1,l=!0;if(!b){if(b=!0,eachProp(k,function(t){var n=t.map,c=n.id;if(t.enabled&&(n.isDefine||o.push(t),!t.error))if(!t.inited&&s)r(c)?(e=!0,u=!0):(a.push(c),i(c));else if(!t.inited&&t.fetched&&n.isDefine&&(u=!0,!n.prefix))return l=!1}),s&&a.length)return t=makeError("timeout","Load timeout for modules: "+a,null,a),t.contextName=E.contextName,c(t);l&&each(o,function(t){d(t,{},{})}),s&&!e||!u||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,f()},50)),b=!1}}function p(t){hasProp(T,t[0])||o(a(t[0],null,!0)).init(t[1],t[2])}function m(t,e,n,i){t.detachEvent&&!isOpera?i&&t.detachEvent(i,e):t.removeEventListener(n,e,!1)}function g(t){var e=t.currentTarget||t.srcElement;return m(e,E.onScriptLoad,"load","onreadystatechange"),m(e,E.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function v(){var t;for(l();O.length;){if(t=O.shift(),null===t[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));p(t)}}var b,y,E,x,w,_={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},k={},A={},O=[],T={},C={},q={},I=1,M=1;return x={require:function(t){return t.require?t.require:t.require=E.makeRequire(t.map)},exports:function(t){return t.usingExports=!0,t.map.isDefine?t.exports?T[t.map.id]=t.exports:t.exports=T[t.map.id]={}:void 0},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(_.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},y=function(t){this.events=getOwn(A,t.id)||{},this.map=t,this.shim=getOwn(_.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(t,e,n,i){i=i||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,E.startTime=(new Date).getTime();var t=this.map;return this.shim?void E.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()})):t.prefix?this.callPlugin():this.load()}},load:function(){var t=this.map.url;C[t]||(C[t]=!0,E.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,i=this.depExports,r=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=E.execCb(n,s,i,r)}catch(a){t=a}else r=E.execCb(n,s,i,r);if(this.map.isDefine&&void 0===r&&(e=this.module,e?r=e.exports:this.usingExports&&(r=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",c(this.error=t)}else r=s;this.exports=r,this.map.isDefine&&!this.ignore&&(T[n]=r,req.onResourceLoad&&req.onResourceLoad(E,this.map,this.depMaps)),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,i=a(t.prefix);this.depMaps.push(i),u(i,"defined",bind(this,function(i){var r,s,l,d=getOwn(q,this.map.id),f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,m=E.makeRequire(t.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(f=i.normalize(f,function(t){return n(t,p,!0)})||""),s=a(t.prefix+"!"+f,this.map.parentMap),u(s,"defined",bind(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),l=getOwn(S,s.id),void(l&&(this.depMaps.push(s),this.events.error&&l.on("error",bind(this,function(t){this.emit("error",t)})),l.enable()))):d?(this.map.url=E.nameToUrl(d),void this.load()):(r=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),r.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(S,function(t){0===t.map.id.indexOf(e+"_unnormalized")&&h(t.map.id)}),c(t)}),r.fromText=bind(this,function(n,i){var s=t.name,u=a(s),l=useInteractive;i&&(n=i),l&&(useInteractive=!1),o(u),hasProp(_.config,e)&&(_.config[s]=_.config[e]);try{req.exec(n)}catch(h){return c(makeError("fromtexteval","fromText eval for "+e+" failed: "+h,h,[e]))}l&&(useInteractive=!0),this.depMaps.push(u),E.completeLoad(s),m([s],r)}),void i.load(t.name,m,r,_))})),E.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,i,r;if("string"==typeof t){if(t=a(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,r=getOwn(x,t.id))return void(this.depExports[e]=r(this));this.depCount+=1,u(t,"defined",bind(this,function(t){this.defineDep(e,t),this.check()})),this.errback&&u(t,"error",bind(this,this.errback))}n=t.id,i=S[n],hasProp(x,n)||!i||i.enabled||E.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(S,t.id);e&&!e.enabled&&E.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},E={config:_,contextName:t,registry:S,defined:T,urlFetched:C,defQueue:O,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(t){t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/");var e=_.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){n[e]?(_[e]||(_[e]={}),mixin(_[e],t,!0,!0)):_[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(q[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,n){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=E.makeShimExports(t)),e[n]=t}),_.shim=e),t.packages&&each(t.packages,function(t){var e,n;t="string"==typeof t?{name:t}:t,n=t.name,e=t.location,e&&(_.paths[n]=t.location),_.pkgs[n]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(t,e){t.inited||t.map.unnormalized||(t.map=a(e))}),(t.deps||t.callback)&&E.require(t.deps||[],t.callback)},makeShimExports:function(t){function e(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}return e},makeRequire:function(e,r){function s(n,i,u){var l,h,d;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),u):e&&hasProp(x,n)?x[n](S[e.id]):req.get?req.get(E,n,e,s):(h=a(n,e,!1,!0),l=h.id,hasProp(T,l)?T[l]:c(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+t+(e?"":". Use require([])")))):(v(),E.nextTick(function(){v(),d=o(a(null,e)),d.skipMap=r.skipMap,d.init(n,i,u,{enabled:!0}),f()}),s)}return r=r||{},mixin(s,{isBrowser:isBrowser,toUrl:function(t){var i,r=t.lastIndexOf("."),s=t.split("/")[0],a="."===s||".."===s;return-1!==r&&(!a||r>1)&&(i=t.substring(r,t.length),t=t.substring(0,r)),E.nameToUrl(n(t,e&&e.id,!0),i,!0)},defined:function(t){return hasProp(T,a(t,e,!1,!0).id)},specified:function(t){return t=a(t,e,!1,!0).id,hasProp(T,t)||hasProp(S,t)}}),e||(s.undef=function(t){l();var n=a(t,e,!0),r=getOwn(S,t);i(t),delete T[t],delete C[n.url],delete A[t],eachReverse(O,function(e,n){e[0]===t&&O.splice(n,1)}),r&&(r.events.defined&&(A[t]=r.events),h(t))}),s},enable:function(t){var e=getOwn(S,t.id);e&&o(t).enable()},completeLoad:function(t){var e,n,i,s=getOwn(_.shim,t)||{},a=s.exports;for(l();O.length;){if(n=O.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);p(n)}if(i=getOwn(S,t),!e&&!hasProp(T,t)&&i&&!i.inited){if(!(!_.enforceDefine||a&&getGlobal(a)))return r(t)?void 0:c(makeError("nodefine","No define call for "+t,null,[t]));p([t,s.deps||[],s.exportsFn])}f()},nameToUrl:function(t,e,n){var i,r,s,a,o,u,c,l=getOwn(_.pkgs,t);if(l&&(t=l),c=getOwn(q,t))return E.nameToUrl(c,e,n);if(req.jsExtRegExp.test(t))o=t+(e||"");else{for(i=_.paths,r=t.split("/"),s=r.length;s>0;s-=1)if(a=r.slice(0,s).join("/"),u=getOwn(i,a)){isArray(u)&&(u=u[0]),r.splice(0,s,u);break}o=r.join("/"),o+=e||(/^data\:|\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":_.baseUrl)+o}return _.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+_.urlArgs):o},load:function(t,e){req.load(E,t,e)},execCb:function(t,e,n,i){return e.apply(i,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=g(t);E.completeLoad(e.id)}},onScriptError:function(t){var e=g(t);return r(e.id)?void 0:c(makeError("scripterror","Script error for: "+e.id,t,[e.id]))}},E.require=E.makeRequire(),E}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){return"interactive"===t.readyState?interactiveScript=t:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.14",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,i){var r,s,a=defContextName;return isArray(t)||"string"==typeof t||(s=t,isArray(e)?(t=e,e=n,n=i):t=[]),s&&s.context&&(a=s.context),r=getOwn(contexts,a),r||(r=contexts[a]=req.s.newContext(a)),s&&r.configure(s),r.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick="undefined"!=typeof setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t){var e=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return e.type=t.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e},req.load=function(t,e,n){var i,r=t&&t.config||{};if(isBrowser)return i=req.createNode(r,e,n),i.setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",e),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),t.completeLoad(e)}catch(s){t.onError(makeError("importscripts","importScripts failed for "+e+" at "+n,s,[e]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){return head||(head=t.parentNode),dataMain=t.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(t,e,n){var i,r;"string"!=typeof t&&(n=e,e=t,t=null),isArray(e)||(n=e,e=null),!e&&isFunction(n)&&(e=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(t||(t=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")])),(r?r.defQueue:globalDefQueue).push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this);